<div class="profile-page-section rewards-page-section">
  <div class="left-side">
    <div class="profile-card">
      <div class="profile-card-logo">
        <img src="./assets/images/logo.png" alt="">
      </div>
      <div class="profile-card-info">
        <h1>Rewards Center</h1>
        <span>Redeem your points for exclusive rewards and benefits</span>
      </div>
      <!-- <div class="points"><i class="bi bi-stars"></i> {{ totalCoins }}</div> -->
    </div>


    <!-- Points Summary Box -->
    <div class="tools-page-section">
      <!-- <div class="points-box">
  <div class="left">
    <div class="icon"><i class="bi bi-award"></i></div>
    <div>
      <div class="text-title">Your Points</div>
      <div class="text-muted">Redeem your points for exclusive rewards</div>
    </div>
  </div>
  <div class="points"><i class="bi bi-stars"></i> 715</div>
</div> -->

      <div class="reward-carousel-block" *ngIf="featuredRewards.length">
        <div class="reward-carousel bg-lightblue rounded-4 d-flex align-items-center p-4 position-relative">

          <button class="carousel-arrow left-arrow" (click)="prevSlide()"><i class="bi bi-chevron-left"></i></button>

          <div class="flex-grow-1 pe-4">
            <small class="text-muted fw-semibold">Featured Reward</small>
            <h3 class="fw-bold mt-2">{{ featuredRewards[currentSlide]?.Title }}</h3>
            <p class="text-secondary mb-3">{{ featuredRewards[currentSlide]?.ShortDescription }}</p>

            <div class="d-flex align-items-center mb-3">
              <i class="bi bi-award text-primary me-2"></i>
              <span class="fw-semibold fs-5">{{ featuredRewards[currentSlide]?.Points }} points</span>
            </div>

            <button class="btn btn-primary rounded-3 px-4">Redeem Now</button>
          </div>

          <div class="reward-image-container ms-auto">
            <img [src]="featuredRewards[currentSlide]?.ImageURL" alt="reward" class="img-fluid rounded-3" />
          </div>

          <button class="carousel-arrow right-arrow" (click)="nextSlide()"><i class="bi bi-chevron-right"></i></button>

          <div class="text-center my-3 position-absolute bottom-0 start-50 translate-middle-x">
            <span *ngFor="let reward of featuredRewards; let i = index" class="carousel-dot"
              [class.active]="i === currentSlide">
            </span>
          </div>

        </div>
      </div>




      <ul class="nav nav-pills my-3 course-tabs">
        <li class="nav-item">
          <a class="nav-link" [class.active]="filteredCategory === 'all'" (click)="filterRewards('all')">All Rewards</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" [class.active]="filteredCategory === 'merchandise'"
            (click)="filterRewards('merchandise')">Merchandise</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" [class.active]="filteredCategory === 'digital'"
            (click)="filterRewards('digital')">Digital</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" [class.active]="filteredCategory === 'experiences'"
            (click)="filterRewards('experiences')">Experiences</a>
        </li>
      </ul>

      <div>
        <div class="row g-4">
          <div class="col-md-6 col-lg-4 col-12" *ngFor="let reward of rewardsList">

            <div *ngIf="filteredCategory === 'all' || reward.Category === filteredCategory"
              class="card reward-card h-100">
              <img [src]="reward.ImageURL" class="card-img-top rounded-top" [alt]="reward.Title">
              <div class="card-body">
                <div class="d-flex justify-content-between align-items-start mb-2">
                  <h5 class="card-title fw-bold">{{ reward.Title }}</h5>
                  <span class="badge text-bg-light">{{ reward.Category }}</span>
                </div>
                <p class="card-text text-secondary mb-3">{{ reward.ShortDescription }}</p>
                <div class="d-flex align-items-center mb-2 text-primary fs-14">
                  <i class="bi bi-award me-2"></i>
                  <strong>{{ reward.Points }} points</strong>
                  <span *ngIf="reward.DeliveryInfo" class="text-muted ms-auto d-flex align-items-center">
                    <i class="bi bi-truck me-1"></i> {{ reward.DeliveryInfo }}
                  </span>
                </div>
                <button class="btn btn-primary w-100 rounded-3 mt-3" data-bs-toggle="modal"
                  data-bs-target="#confirmRedemptionModal" (click)="openRedeemModal(reward)">
                  Redeem Now
                </button>
              </div>
            </div>

          </div>
        </div>
      </div>

      <div class="earn-card-section">
        <div>
          <h5 class="fw-bold mb-3 text-dark">
            <i class="bi bi-gift-fill text-primary me-2"></i> How to Earn More Points
          </h5>
          <!-- <div class="row g-3">
            <div class="col-md-4">
              <div class="earn-card h-100 p-3 rounded-3">
                <h6 class="fw-semibold">Complete Your Profile</h6>
                <p class="text-secondary mb-3">Add your professional details and profile picture to earn 50 points.</p>
                <button class="btn btn-outline-dark btn-sm rounded-3" routerLink="/profile">Go to Profile</button>
              </div>
            </div>
            <div class="col-md-4">
              <div class="earn-card h-100 p-3 rounded-3">
                <h6 class="fw-semibold">Write Product Reviews</h6>
                <p class="text-secondary mb-3">Earn 25 points for each detailed product review you submit.</p>
                <button class="btn btn-outline-dark btn-sm rounded-3" routerLink="/reviews">Write Reviews</button>
              </div>
            </div>
            <div class="col-md-4">
              <div class="earn-card h-100 p-3 rounded-3">
                <h6 class="fw-semibold">Use AV Tools</h6>
                <p class="text-secondary mb-3">Earn points by using our professional AV tools regularly.</p>
                <button class="btn btn-outline-dark btn-sm rounded-3" routerLink="/tools">Explore Tools</button>
              </div>
            </div>
          </div> -->

          <div class="earn-cards-grid">



              <div class="earn-card-v2 card">
                <h3 class="card__title">Title
                </h3>
                <p class="card__content">Lorem ipsum dolor sit amet consectetur adipisicing elit. </p>
                <div class="card__date">
                    April 15, 2022
                </div>
                <div class="card__arrow">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" height="15" width="15">
                        <path fill="#fff" d="M13.4697 17.9697C13.1768 18.2626 13.1768 18.7374 13.4697 19.0303C13.7626 19.3232 14.2374 19.3232 14.5303 19.0303L20.3232 13.2374C21.0066 12.554 21.0066 11.446 20.3232 10.7626L14.5303 4.96967C14.2374 4.67678 13.7626 4.67678 13.4697 4.96967C13.1768 5.26256 13.1768 5.73744 13.4697 6.03033L18.6893 11.25H4C3.58579 11.25 3.25 11.5858 3.25 12C3.25 12.4142 3.58579 12.75 4 12.75H18.6893L13.4697 17.9697Z"></path>
                    </svg>
                </div>
            </div>



              <div class="earn-card-v2 card">
                <h3 class="card__title">Title
                </h3>
                <p class="card__content">Lorem ipsum dolor sit amet consectetur adipisicing elit. </p>
                <div class="card__date">
                    April 15, 2022
                </div>
                <div class="card__arrow">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" height="15" width="15">
                        <path fill="#fff" d="M13.4697 17.9697C13.1768 18.2626 13.1768 18.7374 13.4697 19.0303C13.7626 19.3232 14.2374 19.3232 14.5303 19.0303L20.3232 13.2374C21.0066 12.554 21.0066 11.446 20.3232 10.7626L14.5303 4.96967C14.2374 4.67678 13.7626 4.67678 13.4697 4.96967C13.1768 5.26256 13.1768 5.73744 13.4697 6.03033L18.6893 11.25H4C3.58579 11.25 3.25 11.5858 3.25 12C3.25 12.4142 3.58579 12.75 4 12.75H18.6893L13.4697 17.9697Z"></path>
                    </svg>
                </div>
            </div>



              <div class="earn-card-v2 card">
                <h3 class="card__title">Title
                </h3>
                <p class="card__content">Lorem ipsum dolor sit amet consectetur adipisicing elit. </p>
                <div class="card__date">
                    April 15, 2022
                </div>
                <div class="card__arrow">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" height="15" width="15">
                        <path fill="#fff" d="M13.4697 17.9697C13.1768 18.2626 13.1768 18.7374 13.4697 19.0303C13.7626 19.3232 14.2374 19.3232 14.5303 19.0303L20.3232 13.2374C21.0066 12.554 21.0066 11.446 20.3232 10.7626L14.5303 4.96967C14.2374 4.67678 13.7626 4.67678 13.4697 4.96967C13.1768 5.26256 13.1768 5.73744 13.4697 6.03033L18.6893 11.25H4C3.58579 11.25 3.25 11.5858 3.25 12C3.25 12.4142 3.58579 12.75 4 12.75H18.6893L13.4697 17.9697Z"></path>
                    </svg>
                </div>
            </div>



              <div class="earn-card-v2 card">
                <h3 class="card__title">Title
                </h3>
                <p class="card__content">Lorem ipsum dolor sit amet consectetur adipisicing elit. </p>
                <div class="card__date">
                    April 15, 2022
                </div>
                <div class="card__arrow">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" height="15" width="15">
                        <path fill="#fff" d="M13.4697 17.9697C13.1768 18.2626 13.1768 18.7374 13.4697 19.0303C13.7626 19.3232 14.2374 19.3232 14.5303 19.0303L20.3232 13.2374C21.0066 12.554 21.0066 11.446 20.3232 10.7626L14.5303 4.96967C14.2374 4.67678 13.7626 4.67678 13.4697 4.96967C13.1768 5.26256 13.1768 5.73744 13.4697 6.03033L18.6893 11.25H4C3.58579 11.25 3.25 11.5858 3.25 12C3.25 12.4142 3.58579 12.75 4 12.75H18.6893L13.4697 17.9697Z"></path>
                    </svg>
                </div>
            </div>



              <div class="earn-card-v2 card">
                <h3 class="card__title">Title
                </h3>
                <p class="card__content">Lorem ipsum dolor sit amet consectetur adipisicing elit. </p>
                <div class="card__date">
                    April 15, 2022
                </div>
                <div class="card__arrow">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" height="15" width="15">
                        <path fill="#fff" d="M13.4697 17.9697C13.1768 18.2626 13.1768 18.7374 13.4697 19.0303C13.7626 19.3232 14.2374 19.3232 14.5303 19.0303L20.3232 13.2374C21.0066 12.554 21.0066 11.446 20.3232 10.7626L14.5303 4.96967C14.2374 4.67678 13.7626 4.67678 13.4697 4.96967C13.1768 5.26256 13.1768 5.73744 13.4697 6.03033L18.6893 11.25H4C3.58579 11.25 3.25 11.5858 3.25 12C3.25 12.4142 3.58579 12.75 4 12.75H18.6893L13.4697 17.9697Z"></path>
                    </svg>
                </div>
            </div>
      

          </div>
        </div>
      </div>




    </div>
  </div>
  <div class="right-side">

    <div class="ad-card">
      <div class="ad-header">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
          class="lucide lucide-badge-info h-4 w-4 mr-2">
          <path
            d="M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z">
          </path>
          <line x1="12" x2="12" y1="16" y2="12"></line>
          <line x1="12" x2="12.01" y1="8" y2="8"></line>
        </svg> Sponsored Content
      </div>
      <div class="ad-image">
        <img src="https://via.placeholder.com/240x150?text=Sample+Ad+1" alt="Sample Ad">
        <div class="ad-label">Advertisement</div>
      </div>
      <div class="ad-body">
        <h5>Sample Ad 1</h5>
        <p>This is a sample advertisement.</p>
        <button class="btn learn-more-btn mx-auto">Learn More</button>
      </div>
      <div class="ad-footer">
        Google Ad Slot <br>
        <small>Advertisement · <a href="#">Report this ad</a></small>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="confirmRedemptionModal" tabindex="-1" aria-labelledby="confirmRedemptionLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content rounded-4 border-0 shadow-sm">

      <!-- Modal Header with Close -->
      <div class="d-flex justify-content-between" style="padding: 20px 20px 0 20px;">
        <h6 class="fw-semibold mb-1">Confirm Redemption</h6>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <!-- Modal Body -->
      <div class="modal-body pt-0 px-4" style="background-color: #fff !important;gap: 10px !important;">

        <p class="text-muted mb-4 small">
          You are about to redeem the following reward using your points.
        </p>

        <div class="d-flex align-items-start gap-3 mb-3">
          <img [src]="selectedReward?.ImageURL" alt="Product" class="rounded-2" width="52" height="52">
          <div>
            <div class="fw-semibold small mb-1">{{ selectedReward?.Title }}</div>
            <div class="text-muted small">{{ selectedReward?.ShortDescription }} </div>
          </div>
        </div>

        <div class="d-flex justify-content-between align-items-center bg-light rounded-3 py-2 px-3 mb-3">
          <div class="fw-semibold small" style="font-size: 16px;">
            <i class="bi bi-award me-1 text-primary"></i> <span class="text-black">{{ selectedReward?.Points}}
              points</span>
          </div>
          <div class="text-muted small" style="font-size: 14px;font-weight: 500; color: #64748b !important;">Balance
            after: {{ totalCoins - selectedReward?.Points }} points</div>
        </div>

        <div class="text-muted small mb-1" style="color: #64748b !important;">
          <i class="bi bi-truck me-1"></i>Estimated delivery: {{ selectedReward?.DeliveryInfo }}
        </div>
      </div>

      <!-- Footer Buttons -->
      <div class="modal-footer border-0 px-4 pb-4 pt-0 justify-content-between"
        *ngIf="totalCoins >= selectedReward?.Points">
        <button type="button" class="btn btn-outline-secondary rounded-3 px-4" data-bs-dismiss="modal"
          style="border-color: e2e8f0 ;color: #000;">Cancel</button>
        <button type="button" class="btn btn-primary rounded-3 px-4 d-flex align-items-center justify-content-center"
          [disabled]="isRedeeming" (click)="redeemReward()">
          <span *ngIf="!isRedeeming">Confirm Redemption</span>
          <span *ngIf="isRedeeming" class="spinner-border spinner-border-sm me-2" role="status"
            aria-hidden="true"></span>
          <span *ngIf="isRedeeming">Processing...</span>
        </button>

      </div>


      <p class="text-danger text-center no-coins" *ngIf="totalCoins <= selectedReward?.Points">You don't have enough coins</p>
    </div>
  </div>
</div>


<ng-container *ngIf="showLoginRewards">
  <app-coins-page [Coins]="selectedReward?.Points" [PageType]="'Rewards'" [Description]="'Coins Redemption'"
    [TransactionType]="'Used'">
  </app-coins-page>