<div class="profile-page-section">
  <div class="left-side">
    <div class="dashboard-container">
      <a href="#" class="back-link">← Back</a>
      <h2 class="dashboard-title">Dashboard</h2>

      <!-- <div class="purchase-box">
        <h3>Your Purchases</h3>
        <p class="purchase-subtext">You have 1 purchase</p>
        <div class="table-responsive">
          <table class="purchase-table">
            <thead>
              <tr>
                <th>Item</th>
                <th>Date</th>
                <th>Amount</th>
                <th>Status</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Video Bandwidth Calculator</td>
                <td>16/06/2025</td>
                <td>100 points</td>
                <td><span class="status-completed">Completed</span></td>
                <td><a href="#" class="open-tool-btn">Open Tool ↗</a></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div> -->


      <div class="points-container">
        <h2>Points & Transactions</h2>

        <div class="points-summary">
          <div class="points-header">Your Points</div>
          <div class="points-balance">{{ totalBalance }}</div>
          <div class="points-stats">
            <span class="earned">↑ {{ totalEarned }}<br><small>Total Earned</small></span>
            <span class="spent">↓ {{ totalSpent }}<br><small>Total Spent</small></span>
          </div>
        </div>

        <div class="transactions" *ngIf="coinsHistory?.length">
          <h3>Transaction History</h3>
          <table class="table">
            <thead>
              <tr>
                <th>Date</th>
                <th>Type</th>
                <th>Amount</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of coinsHistory">
                <td>{{ item.CreatedAt | date:'MMMM d, y h:mm a' }}</td>
                <td
                  [ngClass]="{'earned': item.TransactionType === 'Earned', 'spent': item.TransactionType === 'Spent'}">
                  {{ item.TransactionType }}
                </td>
                <td class="amount">
                  {{ item.TransactionType === 'Earned' ? '+' + item.Coins : '-' + item.Coins }}
                </td>
                <td>{{ item.Description }}</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div *ngIf="coinsHistory?.length === 0" class="text-muted">
          No transactions available.
        </div>
      </div>



      <div class="points-transactions">
        <h2>Points & Transactions</h2>
        <div class="grid-container">
          <!-- Profile Completion -->
          <!-- Profile Completion -->
          <div class="card profile-card">
            <h3>Profile Completion</h3>
            <p class="progress-text">{{ profileWeight }}% Complete</p>
            <div class="progress-bar">
              <div class="progress-fill" [style.width.%]="profileWeight"></div>
            </div>

            <ul class="checklist">
              <li *ngFor="let section of sectionStatus"
                [ngClass]="{ 'complete': section.complete, 'pending': !section.complete }">
                <i class="bi" [ngClass]="section.complete ? 'bi-check2-circle' : 'bi-circle'"></i>
                {{ section.label }}
                <span class="inline-right">
                  {{ section.complete ? 'Completed' : 'Complete' }}
                </span>
              </li>
            </ul>

            <button class="btn-complete" [routerLink]="['/profile']">Complete Your Profile</button>
          </div>


          <!-- Points Leaderboard -->
          <div class="card leaderboard-card">
            <h3><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="lucide lucide-trophy h-5 w-5 text-yellow-500">
                <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
                <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
                <path d="M4 22h16"></path>
                <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
                <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
                <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
              </svg> Points Leaderboard</h3>
            <p class="leaderboard-subtext">Top point earners in the community</p>
            <ul class="leaderboard-list">
              <li *ngFor="let user of leaderboard; let i = index">
                <!-- Medal Number or Icon -->
                <span class="medal" [ngClass]="{
      'gold': i === 0,
      'silver': i === 1,
      'bronze': i === 2,
      'other': i > 2
    }">
                  <ng-container *ngIf="i < 3">
                    <svg *ngIf="i === 0" xmlns="http://www.w3.org/2000/svg"
                      class="lucide lucide-trophy h-4 w-4 text-yellow-600" width="20" height="20" fill="none"
                      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
                      <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
                      <path d="M4 22h16"></path>
                      <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
                      <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
                      <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
                    </svg>
                    <svg *ngIf="i === 1" xmlns="http://www.w3.org/2000/svg"
                      class="lucide lucide-medal h-4 w-4 text-gray-600" width="20" height="20" fill="none"
                      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path
                        d="M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15">
                      </path>
                      <path d="M11 12 5.12 2.2"></path>
                      <path d="m13 12 5.88-9.8"></path>
                      <path d="M8 7h8"></path>
                      <circle cx="12" cy="17" r="5"></circle>
                      <path d="M12 18v-2h-.5"></path>
                    </svg>
                    <svg *ngIf="i === 2" xmlns="http://www.w3.org/2000/svg"
                      class="lucide lucide-medal h-4 w-4 text-amber-600" width="20" height="20" fill="none"
                      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path
                        d="M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15">
                      </path>
                      <path d="M11 12 5.12 2.2"></path>
                      <path d="m13 12 5.88-9.8"></path>
                      <path d="M8 7h8"></path>
                      <circle cx="12" cy="17" r="5"></circle>
                      <path d="M12 18v-2h-.5"></path>
                    </svg>
                  </ng-container>
                  <span *ngIf="i > 2">{{ i + 1 }}</span>
                </span>

                <!-- Profile image if exists -->
                <img *ngIf="user.ImagePath" [src]="user.ImagePath" alt="Profile Image" class="profile-icon" />

                <!-- Name and score -->
                {{ user.FullName || user.EmailId }}
                <span class="score">{{ user.TotalPoints }}</span>
              </li>
            </ul>


          </div>




        </div>
      </div>


      <div class="job-card-wrapper container">
        <div class="header">
          <div>
           <h2>Manage Your Job Postings</h2>
            <p>You have posted {{jobList?.length || 0}} job(s).</p>
          </div>
          <button class="btn-post" data-bs-toggle="modal" data-bs-target="#postNewJob"><i class="bi bi-plus-lg"></i>
            Post New Job</button>
        </div>

        <div class="job-card flex-column" *ngFor="let job of jobList">
          <div class="d-flex job-avatar-section">
            <div class="job-avatar">
              {{ job.CompanyName.charAt(0) }}
            </div>
            <div class="job-info">
              <div class="job-title-row">
                <h3>{{ job.JobTitle }}</h3>
                <span class="badge">Active</span>
              </div>
              <p class="job-meta">{{ job.CompanyName }}</p>
              <p class="job-meta">
                ₹{{ job.Salary }}L{{ job.Salary == 50 ? '+' : '' }}
              </p>
              <p class="job-meta">0 pending, 0 total applications</p>
            </div>
            <div class="job-actions">
              <div class="action-btns">
                <div class="switch-group">
                  Active
                  <label class="switch">
                    <input type="checkbox" checked>
                    <span class="slider"></span>
                  </label>
                </div>
                <button class="btn-applicants">View Applicants</button>
                <button class="btn-delete" (click)="deleteJob(job.JobID)">
                  <i class="bi bi-trash"></i>
                </button>
              </div>
            </div>
          </div>
        </div>


        <!-- <div class="job-card flex-column" id="toggleCard">
          <div class="d-flex job-avatar-section">
            <div class="job-avatar">T</div>
            <div class="job-info">
              <div class="job-title-row">
                <h3>Av Enjineer</h3>
                <span class="badge">Active</span>
              </div>
              <p class="job-meta">Test1</p>
              <p class="job-meta">₹0L – ₹50L</p>
              <p class="job-meta">0 pending, 0 total applications</p>
            </div>
            <div class="job-actions">

              <div class="action-btns">
                <div class="switch-group">
                  Active
                  <label class="switch">
                    <input type="checkbox" checked>
                    <span class="slider"></span>
                  </label>
                </div>
                <button class="btn-applicants" onclick="toggleApplicants(this)">Hide Applicants</button>
                <button class="btn-delete"><i class="bi bi-trash"></i></button>
              </div>
            </div>
          </div>
          <div class="applicants-section border-top mt-3 pt-3 pb-0" id="applicantsSection">
            <strong>Applicants:</strong>
            <p class="mb-0">No applications received yet.</p>
          </div>
        </div> -->

      </div>


      <div class="job-card-wrapper container">
        <div class="header">
          <div>
            <h2>Post your event</h2>
            <p>You have posted {{jobList?.length || 0}} job(s).</p>
          </div>
          <button class="btn-post" (click)="onSubmission('Events')"><i class="bi bi-plus-lg"></i>
            Post Events</button>
        </div>
      </div>



      <div class="my-orders-section job-card-wrapper container">
        <h4 class="mb-3 fw-bold">My Orders</h4>

        <div class="order-card shadow-sm">
          <div class="d-flex justify-content-between align-items-center mb-2 my-order-card">
            <div>
              <strong class="order-card-number"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                  viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                  stroke-linejoin="round" class="lucide lucide-package h-4 w-4">
                  <path
                    d="M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z">
                  </path>
                  <path d="M12 22V12"></path>
                  <path d="m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7"></path>
                  <path d="m7.5 4.27 9 5.15"></path>
                </svg>Order #ORD-20250621-000041</strong>
              <div class="text-muted small">6/21/2025</div>
            </div>
            <div class="d-flex align-items-center gap-2 invoice-pending-section">
              <button class="btn btn-invoice">
                <i class="bi bi-download"></i> Invoice
              </button>
              <span class="order-badge">Pending</span>
            </div>
          </div>

          <div class="d-flex align-items-start gap-3 mb-3">
            <img src="https://m.media-amazon.com/images/I/61-7UXgoGNL.jpg" class="product-img" alt="Product" />
            <div>
              <div class="fw-semibold">Mini Keyboard Convenient Wireless Keyboard, PC/Laptop</div>
              <div class="text-muted small">2 × ₹399</div>
            </div>
          </div>

          <hr />

          <div class="row mb-3">
            <div class="col-md-6 mb-3">
              <div class="d-flex align-items-center mb-1">
                <img src="https://avatars.githubusercontent.com/u/1?v=4" alt="User" class="rounded-circle" width="32" />
                <div class="ms-2">
                  <div class="fw-semibold">Abhiram Kanna</div>
                  <div class="text-muted small"><i class="bi bi-envelope me-2"></i>aseelama&#64;gitam.in</div>
                  <div class="text-muted small"><i class="bi bi-telephone me-2"></i>+949100663645</div>
                </div>
              </div>
            </div>
          </div>
          <div class="mb-3">
            <div class="fw-semibold">Shipping Information</div>
            <div class="text-muted small">
              <i class="bi bi-geo-alt me-2"></i> Waltair uplands, Ramnagar, Sampath Residency flat no. 402
            </div>
          </div>
          <div class="mb-3">
            <div class="fw-semibold">Payment Information</div>
            <div class="text-muted small">Method: COD</div>
            <div class="text-muted small">Total Amount: ₹798</div>
          </div>

          <div class="d-flex justify-content-between align-items-center">
            <div><strong>Total: ₹798</strong></div>
            <div class="status-dropdown">
              <select class="form-select w-auto">
                <option selected>Pending</option>
                <option>Processing</option>
                <option>Shipped</option>
                <option>Delivered</option>
                <option>Cancelled</option>
              </select>
            </div>
          </div>
        </div>
      </div>




      <div class="posted-product-section job-card-wrapper container">
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h5 class="fw-bold">My Posted Products</h5>
          <button class="btn-post" (click)="onSubmission('Product')"><i class="bi bi-plus-lg"></i> Post
            an Item</button>
        </div>

        <div class="row g-4" *ngIf="cartItems?.length > 0">
          <div class="col-md-6" *ngFor="let item of cartItems">
            <div class="product-card shadow-sm">
              <div class="d-flex justify-content-between align-items-center mb-1">
                <div class="product-title">
                  <i class="bi bi-box-seam"></i> {{ item.Title }}
                </div>
                <div class="d-flex align-items-center gap-2">
                  <span class="status-badge">Active</span>
                  <div class="form-check form-switch m-0">
                    <input class="form-check-input" type="checkbox" checked />
                  </div>
                </div>
              </div>

              <div class="text-muted small mb-2">
                {{ item.CreatedAt | date: 'M/d/yyyy' }}
              </div>

              <img [src]="item.ImageUrl || 'assets/images/placeholder.svg'" alt="product image" />

              <div class="d-flex justify-content-between mt-3">
                <div class="price-tag"><i class="bi bi-tag"></i> ₹{{ item.Price }}</div>
                <div class="qty-tag"><i class="bi bi-cube"></i> Qty: {{ item.Quantity }}</div>
              </div>

              <p class="text-muted small mt-2">
                No description available.
              </p>

              <div class="d-flex justify-content-end align-items-center gap-2 product-card-action-btn">
                <button class="btn btn-edit" (click)="onSubmission('Product', item)"><i class="bi bi-pencil"></i>
                  Edit</button>
                <button class="btn btn-delete"><i class="bi bi-trash"></i> Delete</button>
              </div>
            </div>
          </div>
        </div>

        <!-- If empty -->
        <div class="text-center text-muted" *ngIf="cartItems?.length === 0">
          No cart items found.
        </div>

      </div>
    </div>




  </div>
  <div class="right-side">

    <div class="ad-card">
      <div class="ad-header">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
          class="lucide lucide-badge-info h-4 w-4 mr-2">
          <path
            d="M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z">
          </path>
          <line x1="12" x2="12" y1="16" y2="12"></line>
          <line x1="12" x2="12.01" y1="8" y2="8"></line>
        </svg> Sponsored Content
      </div>
      <div class="ad-image">
        <img src="https://via.placeholder.com/240x150?text=Sample+Ad+1" alt="Sample Ad">
        <div class="ad-label">Advertisement</div>
      </div>
      <div class="ad-body">
        <h5>Sample Ad 1</h5>
        <p>This is a sample advertisement.</p>
        <button class="btn learn-more-btn mx-auto">Learn More</button>
      </div>
      <div class="ad-footer">
        Google Ad Slot <br>
        <small>Advertisement · <a href="#">Report this ad</a></small>
      </div>
    </div>
  </div>
</div>



<div class="modal fade post-update-popup" id="postNewJob" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Post a New Job</h5>
        <button type="button" class="btn-close shadow-none" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body bg-white">
        <form [formGroup]="jobForm" (ngSubmit)="onSubmit()">
          <h6 class="section-title">Basic Information</h6>

          <div class="row mb-3">
            <div class="col-md-6">
              <label class="form-label">Job Title *</label>
              <input type="text" formControlName="jobTitle" class="form-control" placeholder="e.g., Senior AV Engineer">
              <div class="text-danger" *ngIf="jobForm.get('jobTitle')?.touched && jobForm.get('jobTitle')?.invalid">
                Job Title is required.
              </div>
            </div>

            <div class="col-md-6">
              <label class="form-label">Company Name *</label>
              <input type="text" formControlName="companyName" class="form-control"
                placeholder="e.g., AV Solutions Inc.">
              <div class="text-danger"
                *ngIf="jobForm.get('companyName')?.touched && jobForm.get('companyName')?.invalid">
                Company Name is required.
              </div>
            </div>
          </div>

          <div class="row mb-3">
            <div class="col-md-6">
              <label class="form-label">Company EmailId *</label>
              <input type="email" formControlName="companyEmail" class="form-control"
                placeholder="e.g., test@avchamps.com">
              <div class="text-danger"
                *ngIf="jobForm.get('companyEmail')?.touched && jobForm.get('companyEmail')?.errors">
                <div *ngIf="jobForm.get('companyEmail')?.errors?.['required']">Email is required.</div>
                <div *ngIf="jobForm.get('companyEmail')?.errors?.['email']">Invalid email format.</div>
              </div>
            </div>

            <div class="col-md-6">
              <label class="form-label">Company Mobile *</label>
              <input type="text" formControlName="companyMobile" class="form-control" placeholder="e.g., 9876543210">
              <div class="text-danger"
                *ngIf="jobForm.get('companyMobile')?.touched && jobForm.get('companyMobile')?.errors">
                <div *ngIf="jobForm.get('companyMobile')?.errors?.['pattern']">Enter valid 10-digit mobile number
                  starting with 6-9.</div>
              </div>
            </div>
          </div>

          <div class="mb-3">
            <label class="form-label">Job Description *</label>
            <textarea formControlName="jobDescription" class="form-control" rows="3"
              placeholder="Describe the role..."></textarea>
            <div class="text-danger"
              *ngIf="jobForm.get('jobDescription')?.touched && jobForm.get('jobDescription')?.invalid">
              Job Description is required.
            </div>
          </div>

          <div class="mb-3">
            <label class="form-label">Location</label>
            <input type="text" formControlName="location" class="form-control" placeholder="e.g., Mumbai">
          </div>

          <h6 class="section-title">Job Details</h6>
          <div class="row mb-3">
            <div class="col-md-4">
              <label class="form-label">Job Type *</label>
              <select formControlName="jobType" class="form-select">
                <option value="">Select Job Type</option>
                <option value="Full-Time">Full-Time</option>
                <option value="Part-Time">Part-Time</option>
              </select>
              <div class="text-danger" *ngIf="jobForm.get('jobType')?.touched && jobForm.get('jobType')?.invalid">
                Job Type is required.
              </div>
            </div>

            <div class="col-md-4">
              <label class="form-label">Experience Level *</label>
              <select formControlName="experienceLevel" class="form-select">
                <option value="">Select Experience Level</option>
                <option value="Fresher">Fresher</option>
                <option value="1-3 Years">1–3 Years</option>
                <option value="3+ Years">3+ Years</option>
              </select>
              <div class="text-danger"
                *ngIf="jobForm.get('experienceLevel')?.touched && jobForm.get('experienceLevel')?.invalid">
                Experience Level is required.
              </div>
            </div>

            <div class="col-md-4">
              <label class="form-label">Category</label>
              <select formControlName="category" class="form-select">
                <option value="">Select Category</option>
                <option value="AV Design">AV Design</option>
                <option value="Support">Support</option>
                <option value="Project Manager">Project Manager</option>
              </select>
            </div>
          </div>

          <label class="form-label">Salary Range</label>
          <input type="range" formControlName="salary" class="form-range" min="0" max="50">
          <div class="d-flex justify-content-between text-muted small">
            <span>₹0L</span>
            <span>₹25L</span>
            <span>₹50L+</span>
          </div>

          <h6 class="section-title">Requirements & Benefits</h6>
          <div class="row mb-3">
            <div class="col-md-6">
              <label class="form-label">Requirements</label>
              <textarea formControlName="requirements" class="form-control" rows="2"
                placeholder="e.g., AutoCAD, Crestron"></textarea>
              <small class="text-muted">Separate multiple requirements with commas</small>
            </div>
            <div class="col-md-6">
              <label class="form-label">Benefits</label>
              <textarea formControlName="benefits" class="form-control" rows="2"
                placeholder="e.g., Health insurance"></textarea>
              <small class="text-muted">Separate multiple benefits with commas</small>
            </div>
          </div>

          <h6 class="section-title">Additional Details</h6>
          <div class="row mb-3">
            <div class="col-md-6">
              <label class="form-label">Application Deadline</label>
              <input type="date" formControlName="deadline" class="form-control">
              <small class="text-muted">Last date for candidates to apply</small>
            </div>
          </div>

          <div class="modal-footer px-0">
            <button type="button" class="btn btn-light" data-bs-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-primary" [disabled]="isSubmitting">
              <span *ngIf="!isSubmitting">Post Job</span>
              <span *ngIf="isSubmitting" class="spinner-border spinner-border-sm" role="status"
                aria-hidden="true"></span>
              <span *ngIf="isSubmitting" class="visually-hidden">Loading...</span>
            </button>

          </div>
        </form>
      </div>

    </div>
  </div>
</div>


<app-post-job *ngIf="currentSection === 'Product'" (onProductSaved)="handleProductSaved()"
  [Products]="editProducts"></app-post-job>
<app-post-events *ngIf="currentSection === 'Events'"></app-post-events>