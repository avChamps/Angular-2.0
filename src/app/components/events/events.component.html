<div class="profile-page-section">
  <div class="left-side" *ngIf="!isPostEvent">
    <div class="profile-card">
      <div class="profile-card-logo">
        <img src="./assets/images/logo.png" alt="">
      </div>
      <div class="profile-card-info">
        <h1>Events</h1>
        <span>Discover and join upcoming AV events</span>
      </div>
    </div>


    <div class="events-page-section">
      <div class="section-header d-flex justify-content-between align-items-start flex-wrap">
        <div>
          <h4 class="mb-1">Upcoming Events</h4>
          <div class="section-sub">Showing 10 of {{ totalRecords }} events</div>
        </div>
        <select class="custom-select form-select mt-2 mt-md-0" [(ngModel)]="selectedCategory" (change)="getEvents()">
          <option value="">All Categories</option>
          <option *ngFor="let category of categories" [value]="category">{{ category }}</option>
        </select>
      </div>

      <!-- <div class="px-lg-4 p-0">
        <div class="featured-title">Featured Events</div>
      </div>

      <div class="row p-lg-4 p-0 pt-4 g-4">
        <div class="col-lg-6 col-12">
          <div class="event-card">
            <span class="featured-badge">Featured</span>

            <div class="event-content">
              <div class="event-tag">AV Meet</div>
              <div class="event-title">Test</div>
              <div class="event-desc">Test Description</div>
              <div class="event-meta">
                <div><i class="bi bi-calendar-event"></i>June 12, 2025</div>
                <div><i class="bi bi-geo-alt"></i>Hyderabad, Telangana</div>
              </div>
              <div class="event-buttons">
                <a href="#" class="btn btn-primary register-btn">
                  Register Now <i class="bi bi-box-arrow-up-right"></i>
                </a>
                <a href="#" class="btn btn-outline-light learn-btn">
                  Learn More
                </a>
              </div>
            </div>
          </div>
        </div>
      </div> -->
      <div class="container p-lg-4 p-0 pt-4">
        <div class="d-flex justify-content-between align-items-start flex-column mb-4">
          <a class="btn btn-primary text-decoration-none" (click)="isPostEvent = true">Submit Your Event</a>
          <h4 class="fw-bold mt-0"><span class="browse-event">Browse Events</span></h4>
        </div>

        <div class="row g-4">
          <!-- Card 1 -->
          <div class="col-md-6 col-lg-4 col-12" *ngFor="let event of events">
            <div class="event-card-bottom">
              <div class="event-img" [ngStyle]="{
       'background-image': 'url(assets/images/' + (event?.EventType === 'TradeShow' ? 'Tradeshow.jpg' : event?.EventType === 'Webinar' ? 'Webinar.jpg' : 'default.jpg') + ')',
   'background-size': 'cover',
       'background-position': 'center',
       'height': '200px',
       'border-radius': '12px'
     }">
                <span class="tag-badge">{{ event?.EventType }}</span>
                <span class="featured-badge">Featured</span>
              </div>

              <div class="event-body">
                <div class="event-title">{{ event?.Title }}</div>
                <div class="event-desc">{{ event?.ShortDescription }}</div>
                <div class="event-meta" *ngIf="event?.StartDate"><i class="bi bi-calendar-event"></i> {{
                  event?.StartDate | date:'MMMM d, y' }}
                </div>
                <div class="event-meta" *ngIf="event?.Location"><i class="bi bi-geo-alt"></i> {{ event?.Location }}
                </div>
                <div class="event-actions mt-3">
                  <a class="btn btn-register" [href]="event?.RegistrationUrl" target="_blank">Register</a>
                  <!-- <button class="btn btn-icon ms-2"><i class="bi bi-share-fill"></i></button> -->
                </div>
              </div>
            </div>
          </div>

          <!-- Existing Event Cards Loop -->

          <div *ngIf="loading && events?.length" class="text-center mt-3">
            <div class="spinner-border text-primary" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
          </div>

          <div *ngIf="!events?.length && !loading" class="col-12">
            <p>No events available for the selected category.</p>
          </div>



        </div>
      </div>
    </div>
  </div>


  <div class="left-side" *ngIf="isPostEvent">
    <div class="submit-event-form">
      <h5>Submit an Event Request</h5>
      <form [formGroup]="eventForm" (ngSubmit)="onSubmit()">

        <!-- Event Title -->
        <div class="mb-3">
          <input type="text" class="form-control" formControlName="Title" placeholder="Event Title" required>
          <div class="text-danger" *ngIf="eventForm.get('Title')?.touched && eventForm.get('Title')?.invalid">
            Event Title is required.
          </div>
        </div>

        <!-- Short Description -->
        <div class="mb-3">
          <textarea class="form-control" formControlName="ShortDescription" rows="2" placeholder="Short Description"
            required style="min-height: 80px;"></textarea>
          <div class="text-danger"
            *ngIf="eventForm.get('ShortDescription')?.touched && eventForm.get('ShortDescription')?.invalid">
            Short Description is required.
          </div>
        </div>

        <!-- Full Event Details -->
        <div class="mb-3">
          <textarea class="form-control" formControlName="FullDetails" rows="4" placeholder="Full Event Details"
            required style="min-height: 80px;"></textarea>
          <div class="text-danger"
            *ngIf="eventForm.get('FullDetails')?.touched && eventForm.get('FullDetails')?.invalid">
            Full Event Details are required.
          </div>
        </div>

        <!-- Start Date -->
        <div class="mb-3">
          <input type="text" class="form-control" bsDatepicker formControlName="StartDate" placeholder="Start Date"
            required>
          <div class="text-danger" *ngIf="eventForm.get('StartDate')?.touched && eventForm.get('StartDate')?.invalid">
            Start Date is required.
          </div>
        </div>

        <!-- End Date -->
        <div class="mb-3">
          <input type="text" class="form-control" bsDatepicker formControlName="EndDate" placeholder="End Date"
            required>
          <div class="text-danger" *ngIf="eventForm.get('EndDate')?.touched && eventForm.get('EndDate')?.invalid">
            End Date is required.
          </div>
        </div>

        <!-- Location -->
        <div class="mb-3">
          <input type="text" class="form-control" formControlName="Location" placeholder="Location" required>
          <div class="text-danger" *ngIf="eventForm.get('Location')?.touched && eventForm.get('Location')?.invalid">
            Location is required.
          </div>
        </div>

        <!-- Event Type -->
        <div class="mb-3">
          <select class="form-select" formControlName="EventType" required>
            <option value="">Select Event Type</option>
            <option *ngFor="let type of categories" [value]="type">{{ type }}</option>
          </select>

          <div class="text-danger" *ngIf="eventForm.get('EventType')?.touched && eventForm.get('EventType')?.invalid">
            Event Type is required.
          </div>
        </div>

        <!-- Registration URL (optional) -->
        <div class="mb-4">
          <input type="url" class="form-control" formControlName="RegistrationUrl"
            placeholder="Registration URL (optional)">
        </div>

        <!-- Submit Button -->
        <div>
          <button type="submit" class="btn btn-submit w-100" [disabled]="isSaving">
            <span *ngIf="isSaving" class="spinner-border spinner-border-sm me-2" role="status"
              aria-hidden="true"></span>
            {{ isSaving ? 'Submitting...' : 'Submit Event Request' }}
          </button>
        </div>


      </form>
    </div>
  </div>

  <div class="right-side">
    <div class="ad-card">
      <div class="ad-header">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
          class="lucide lucide-badge-info h-4 w-4 mr-2">
          <path
            d="M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z">
          </path>
          <line x1="12" x2="12" y1="16" y2="12"></line>
          <line x1="12" x2="12.01" y1="8" y2="8"></line>
        </svg> Sponsored Content
      </div>
      <div class="ad-image">
        <img src="https://via.placeholder.com/240x150?text=Sample+Ad+1" alt="Sample Ad">
        <div class="ad-label">Advertisement</div>
      </div>
      <div class="ad-body">
        <h5>Sample Ad 1</h5>
        <p>This is a sample advertisement.</p>
        <button class="btn learn-more-btn mx-auto">Learn More</button>
      </div>
      <div class="ad-footer">
        Google Ad Slot <br>
        <small>Advertisement Â· <a href="#">Report this ad</a></small>
      </div>
    </div>
  </div>
</div>